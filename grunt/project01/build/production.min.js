var App={allowUser:!0,status:"pause",init:function(){UI.init(),Engine.init()},start:function(){App.status="running",App.allowUser=!1,UI.enableButton("pause"),UI.disableButton("clear"),Engine.generateBoard();var a=setInterval(function(){"running"!==App.status&&clearInterval(a),Engine.generateNextBoard()},200)},pause:function(){"finish"===App.status&&UI.disableButton("pause"),UI.enableButton("play"),UI.enableButton("clear"),App.status="pause",App.allowUser=!0},clear:function(){Engine.clearBoard(),UI.updateGrid(),UI.disableButton("play")}};App.init();var Engine={board:[],init:function(){this.generateBoard()},getBoard:function(){return this.board},generateBoard:function(){var a=UI.$grid,b=[];line=[];for(var c=0;c<20;c++){for(var d=0;d<20;d++){var e=a.querySelectorAll(".row")[c].querySelectorAll(".col")[d];line.push(e.classList.contains("live")?"1":"0")}b.push(line),line=[]}this.board=b},generateNextBoard:function(){for(var a=this.board,b=[],c=[],d=0;d<20;d++){for(var e=0;e<20;e++)c.push(this.checkNeighbors(d,e)?"1":"0");b.push(c),c=[]}return this.compareBoards(a,b)?(App.status="finish",App.pause(),!1):(this.board=b,void UI.updateGrid())},checkNeighbors:function(a,b){var c=this.board,d=c[a][b],e=[a,b];return neighbors=[],neighbors.push(this.getNeighbor(e,"top","left"),this.getNeighbor(e,"top","center"),this.getNeighbor(e,"top","right"),this.getNeighbor(e,"center","left"),this.getNeighbor(e,"center","right"),this.getNeighbor(e,"bottom","left"),this.getNeighbor(e,"bottom","center"),this.getNeighbor(e,"bottom","right")),neighbors=neighbors.filter(function(a){return"1"===a}).length,"1"===d?!(neighbors<2||neighbors>3):3===neighbors},getNeighbor:function(a,b,c){var d=this.board,e={top:a[0]-1,center:a[0],bottom:a[0]+1},f={left:a[1]-1,center:a[1],right:a[1]+1};return void 0!==d[e[b]]?d[e[b]][f[c]]:"0"},compareBoards:function(a,b){return JSON.stringify(a)===JSON.stringify(b)},clearBoard:function(){this.board=this.board.map(function(a){return a.map(function(a){return"0"})})}},UI={$grid:document.querySelector(".grid-container"),$controls:document.querySelector(".controls"),init:function(){this.$grid.addEventListener("click",UI.draw,!1),this.$controls.addEventListener("click",UI.userControl,!1)},draw:function(a){var b=a.target.classList;App.allowUser&&b.contains("col")&&(b.toggle("live"),UI.enableButton("clear"),UI.enableButton("play"))},userControl:function(a){var b=a.target.classList;if(!b.contains("disabled")){var c={play:App.start,pause:App.pause,clear:App.clear};c[b.item(1)](),b.add("disabled")}},enableButton:function(a){this.$controls.querySelector("."+a).classList.remove("disabled")},disableButton:function(a){this.$controls.querySelector("."+a).classList.add("disabled")},updateGrid:function(){for(var a=this.$grid,b=Engine.getBoard(),c=0;c<20;c++)for(var d=0;d<20;d++){var e=a.querySelectorAll(".row")[c].querySelectorAll(".col")[d].classList;"1"===b[c][d]?e.contains("live")||e.add("live"):e.contains("live")&&e.remove("live")}}};